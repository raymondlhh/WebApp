<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forgot Password</title>
  <link rel="stylesheet" href="../CSS/ForgotPassword.css">
</head>
<body>
  <div class="container">
    <img src="../assets/images/icons/welcome_screen/Logo.png" alt="Logo" class="logo">
    <img src="../assets/images/icons/welcome_screen/subtitle.png" alt="Subtitle" class="subtitle">
    
    <div class="error-message" id="error-msg"></div>
    <div class="success-message" id="success-msg"></div>
    
    <input type="email" id="forgot-email" placeholder="Email" class="input-field email-input" required>
    
    <button type="button" id="find-email-btn" class="find-email-button">Find Email</button>
    
    <div id="new-password-section" class="new-password-section">
      <input type="password" id="new-password" placeholder="New Password" class="new-password-input" required>
      <button type="button" id="reset-password-btn" class="reset-password-button">Reset Password</button>
    </div>
    
    <a href="Login.html" class="back-to-login">Back to Login</a>
  </div>
  
  <script>
    let emailFound = false;
    let userDocId = null;
    
    document.getElementById('find-email-btn').addEventListener('click', function() {
      const email = document.getElementById('forgot-email').value.trim();
      const errorMsg = document.getElementById('error-msg');
      const successMsg = document.getElementById('success-msg');
      const newPasswordSection = document.getElementById('new-password-section');
      const findEmailBtn = document.getElementById('find-email-btn');
      
      // Hide previous messages
      errorMsg.style.display = 'none';
      successMsg.style.display = 'none';
      
      // Validate email
      if (!email || !email.includes('@')) {
        errorMsg.textContent = 'Please enter a valid email address';
        errorMsg.style.display = 'block';
        return;
      }
      
      // Simulate email lookup
      setTimeout(() => {
        // Here you would typically make an API call to check if email exists
        console.log('Looking for email:', email);
        
        // For demo purposes, assume email is found
        emailFound = true;
        userDocId = 'demo-user-id';
        
        // Show new password section
        newPasswordSection.style.display = 'block';
        findEmailBtn.style.display = 'none';
        
        // Focus on new password field
        document.getElementById('new-password').focus();
      }, 1000);
    });
    
    document.getElementById('reset-password-btn').addEventListener('click', function() {
      const newPassword = document.getElementById('new-password').value;
      const errorMsg = document.getElementById('error-msg');
      const successMsg = document.getElementById('success-msg');
      const resetBtn = document.getElementById('reset-password-btn');
      
      // Hide previous messages
      errorMsg.style.display = 'none';
      successMsg.style.display = 'none';
      
      // Validate new password
      if (!newPassword) {
        errorMsg.textContent = 'Please enter new password';
        errorMsg.style.display = 'block';
        return;
      }
      
      if (newPassword.length < 6) {
        errorMsg.textContent = 'Password must be at least 6 characters long';
        errorMsg.style.display = 'block';
        return;
      }
      
      // Disable button and show loading
      resetBtn.disabled = true;
      resetBtn.textContent = 'Resetting...';
      
      // Simulate password reset
      setTimeout(() => {
        // Here you would typically make an API call to update password
        console.log('Resetting password for user:', userDocId, 'New password:', newPassword);
        
        // Show success message
        successMsg.textContent = 'Password reset successfully!';
        successMsg.style.display = 'block';
        
        // Redirect to login after a delay
        setTimeout(() => {
          window.location.href = 'Login.html';
        }, 2000);
      }, 1500);
    });
  </script>
</body>
</html> 